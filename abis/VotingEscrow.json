{
  "contractName": "VotingEscrow",
  "abi": [
    {
      "name": "CommitOwnership",
      "inputs": [
        {
          "type": "address",
          "name": "admin",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "name": "ApplyOwnership",
      "inputs": [
        {
          "type": "address",
          "name": "admin",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "name": "Deposit",
      "inputs": [
        {
          "type": "address",
          "name": "provider",
          "indexed": true
        },
        {
          "type": "uint256",
          "name": "value",
          "indexed": false
        },
        {
          "type": "uint256",
          "name": "locktime",
          "indexed": true
        },
        {
          "type": "int128",
          "name": "type",
          "indexed": false
        },
        {
          "type": "uint256",
          "name": "ts",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "name": "Withdraw",
      "inputs": [
        {
          "type": "address",
          "name": "provider",
          "indexed": true
        },
        {
          "type": "uint256",
          "name": "value",
          "indexed": false
        },
        {
          "type": "uint256",
          "name": "ts",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "name": "Supply",
      "inputs": [
        {
          "type": "uint256",
          "name": "prevSupply",
          "indexed": false
        },
        {
          "type": "uint256",
          "name": "supply",
          "indexed": false
        }
      ],
      "anonymous": false,
      "type": "event"
    },
    {
      "outputs": [],
      "inputs": [
        {
          "type": "address",
          "name": "token_addr"
        },
        {
          "type": "string",
          "name": "_name"
        },
        {
          "type": "string",
          "name": "_symbol"
        },
        {
          "type": "string",
          "name": "_version"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "name": "commit_transfer_ownership",
      "outputs": [],
      "inputs": [
        {
          "type": "address",
          "name": "addr"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 37568
    },
    {
      "name": "apply_transfer_ownership",
      "outputs": [],
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 38407
    },
    {
      "name": "commit_smart_wallet_checker",
      "outputs": [],
      "inputs": [
        {
          "type": "address",
          "name": "addr"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 36278
    },
    {
      "name": "apply_smart_wallet_checker",
      "outputs": [],
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 37005
    },
    {
      "name": "get_last_user_slope",
      "outputs": [
        {
          "type": "int128",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "addr"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 2540
    },
    {
      "name": "user_point_history__ts",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "_addr"
        },
        {
          "type": "uint256",
          "name": "_idx"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 1643
    },
    {
      "name": "locked__end",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "_addr"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 1564
    },
    {
      "name": "checkpoint",
      "outputs": [],
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 37118215
    },
    {
      "name": "deposit_for",
      "outputs": [],
      "inputs": [
        {
          "type": "address",
          "name": "_addr"
        },
        {
          "type": "uint256",
          "name": "_value"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 74411056
    },
    {
      "name": "create_lock",
      "outputs": [],
      "inputs": [
        {
          "type": "uint256",
          "name": "_value"
        },
        {
          "type": "uint256",
          "name": "_unlock_time"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 74412397
    },
    {
      "name": "increase_amount",
      "outputs": [],
      "inputs": [
        {
          "type": "uint256",
          "name": "_value"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 74411818
    },
    {
      "name": "increase_unlock_time",
      "outputs": [],
      "inputs": [
        {
          "type": "uint256",
          "name": "_unlock_time"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 74412465
    },
    {
      "name": "withdraw",
      "outputs": [],
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 37289006
    },
    {
      "name": "balanceOf",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "addr"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "name": "balanceOf",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "addr"
        },
        {
          "type": "uint256",
          "name": "_t"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "name": "balanceOfAt",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "addr"
        },
        {
          "type": "uint256",
          "name": "_block"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 509566
    },
    {
      "name": "totalSupply",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "name": "totalSupply",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "uint256",
          "name": "t"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "name": "totalSupplyAt",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "uint256",
          "name": "_block"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 879507
    },
    {
      "name": "changeController",
      "outputs": [],
      "inputs": [
        {
          "type": "address",
          "name": "_newController"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function",
      "gas": 36878
    },
    {
      "name": "token",
      "outputs": [
        {
          "type": "address",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 1751
    },
    {
      "name": "supply",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 1781
    },
    {
      "name": "locked",
      "outputs": [
        {
          "type": "int128",
          "name": "amount"
        },
        {
          "type": "uint256",
          "name": "end"
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "arg0"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 3260
    },
    {
      "name": "epoch",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 1841
    },
    {
      "name": "point_history",
      "outputs": [
        {
          "type": "int128",
          "name": "bias"
        },
        {
          "type": "int128",
          "name": "slope"
        },
        {
          "type": "uint256",
          "name": "ts"
        },
        {
          "type": "uint256",
          "name": "blk"
        }
      ],
      "inputs": [
        {
          "type": "uint256",
          "name": "arg0"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 5178
    },
    {
      "name": "user_point_history",
      "outputs": [
        {
          "type": "int128",
          "name": "bias"
        },
        {
          "type": "int128",
          "name": "slope"
        },
        {
          "type": "uint256",
          "name": "ts"
        },
        {
          "type": "uint256",
          "name": "blk"
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "arg0"
        },
        {
          "type": "uint256",
          "name": "arg1"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 5423
    },
    {
      "name": "user_point_epoch",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "address",
          "name": "arg0"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 2146
    },
    {
      "name": "slope_changes",
      "outputs": [
        {
          "type": "int128",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "uint256",
          "name": "arg0"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 2076
    },
    {
      "name": "controller",
      "outputs": [
        {
          "type": "address",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 1991
    },
    {
      "name": "transfersEnabled",
      "outputs": [
        {
          "type": "bool",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 2021
    },
    {
      "name": "name",
      "outputs": [
        {
          "type": "string",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 8453
    },
    {
      "name": "symbol",
      "outputs": [
        {
          "type": "string",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 7506
    },
    {
      "name": "version",
      "outputs": [
        {
          "type": "string",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 7536
    },
    {
      "name": "decimals",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 2141
    },
    {
      "name": "future_smart_wallet_checker",
      "outputs": [
        {
          "type": "address",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 2171
    },
    {
      "name": "smart_wallet_checker",
      "outputs": [
        {
          "type": "address",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 2201
    },
    {
      "name": "admin",
      "outputs": [
        {
          "type": "address",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 2231
    },
    {
      "name": "future_admin",
      "outputs": [
        {
          "type": "address",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 2261
    }
  ],
  "bytecode": "0x6f7fffffffffffffffffffffffffffffff6040526080612ffe610140396020612ffe60c03960c05160a01c1561003457600080fd5b606060206020612ffe0160c03960c051612ffe016101c039604060206020612ffe0160c03960c05160040135111561006b57600080fd5b604060206040612ffe0160c03960c051612ffe0161024039602060206040612ffe0160c03960c0516004013511156100a257600080fd5b604060206060612ffe0160c03960c051612ffe016102a039602060206060612ffe0160c03960c0516004013511156100d957600080fd5b3360105561014051600055436003600460c052602060c02060c052602060c0200155426002600460c052602060c02060c052602060c02001553360085560016009556020610380600463313ce5676103205261033c610140515afa61013d57600080fd5b601f3d1161014a57600080fd5b600050610380516103005260ff61030051111561016657600080fd5b61030051600d556101c080600a60c052602060c020602082510161012060006003818352015b8261012051602002111561019f576101c1565b61012051602002850151610120518501555b815160010180835281141561018c575b50505050505061024080600b60c052602060c020602082510161012060006002818352015b826101205160200211156101f95761021b565b61012051602002850151610120518501555b81516001018083528114156101e6575b5050505050506102a080600c60c052602060c020602082510161012060006002818352015b8261012051602002111561025357610275565b61012051602002850151610120518501555b8151600101808352811415610240575b505050505050612fe656341561000a57600080fd5b600436101561001857612d60565b600035601c526f7fffffffffffffffffffffffffffffff604052636b441a4060005114156100945760043560a01c1561005057600080fd5b601054331461005e57600080fd5b600435601155600435610140527f2f56810a6bf40af059b96d3aea4db54081f378029a518390491093a7b67032e96020610140a1005b636a1c05ae60005114156100ff5760105433146100b057600080fd5b60115461014052600061014051186100c757600080fd5b6101405160105561014051610160527febee2d5739011062cb4f14113f3b36bf0ffe3da5c0568f64189d1012a11891056020610160a1005b6357f901e260005114156101335760043560a01c1561011d57600080fd5b601054331461012b57600080fd5b600435600e55005b638e5b490f600051141561015757601054331461014f57600080fd5b600e54600f55005b600015610241575b61016052610140523261014051181561023b57600f546101805260006101805118156101d1576020610220602463c23697a86101a052610140516101c0526101bc6000610180515af16101b157600080fd5b601f3d116101be57600080fd5b60005061022051156101d05761016051565b5b6308c379a06101a05260206101c05260256101e0527f536d61727420636f6e7472616374206465706f7369746f7273206e6f7420616c610200527f6c6f776564000000000000000000000000000000000000000000000000000000610220526101e05060846101bcfd5b61016051565b637c74a17460005114156102b85760043560a01c1561025f57600080fd5b600660043560e05260c052604060c0205461014052600161014051633b9aca00811061028a57600080fd5b600560043560e05260c052604060c02060c052602060c0200160c052602060c020015460005260206000f350005b63da020a1860005114156103195760043560a01c156102d657600080fd5b6002602435633b9aca0081106102eb57600080fd5b600560043560e05260c052604060c02060c052602060c0200160c052602060c020015460005260206000f350005b63adc63589600051141561035e5760043560a01c1561033757600080fd5b6001600260043560e05260c052604060c02060c052602060c020015460005260206000f350005b600015610be6575b6101e0526101405261016052610180526101a0526101c052610140366102003760035461034052600061014051181561053557426101805111156103b057600061016051136103b3565b60005b1561043c5761016051630784ce00808205808060008112156103d157195b607f1c156103de57600080fd5b90509050905061022052610220516101805142808210156103fe57600080fd5b8082039050905060405181111561041457600080fd5b8082028080600081121561042457195b607f1c1561043157600080fd5b905090509050610200525b426101c05111156104535760006101a05113610456565b60005b156104df576101a051630784ce008082058080600081121561047457195b607f1c1561048157600080fd5b9050905090506102a0526102a0516101c05142808210156104a157600080fd5b808203905090506040518111156104b757600080fd5b808202808060008112156104c757195b607f1c156104d457600080fd5b905090509050610280525b60076101805160e05260c052604060c020546103005260006101c051181561053457610180516101c051141561051c576103005161032052610533565b60076101c05160e05260c052604060c02054610320525b5b5b61036060008152600081602001524281604001524381606001525060006103405111156105cc57610360610340516c01431e0fae6d7217caa0000000811061057c57600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c0200154826060015250505b6103a0516103e0526104006103608051825280602001518260200152806040015182604001528060600151826060015250506000610480526103a05142111561067b57670de0b6b3a7640000436103c0518082101561062a57600080fd5b80820390509050808202821582848304141761064557600080fd5b80905090509050426103a0518082101561065e57600080fd5b80820390509050808061067057600080fd5b820490509050610480525b6103e05162093a808082049050905062093a8080820282158284830414176106a257600080fd5b809050905090506104a0526104c0600060ff818352015b6104a0805162093a808181830110156106d157600080fd5b8082019050905081525060006104e052426104a05111156106f657426104a05261070d565b60076104a05160e05260c052604060c020546104e0525b6103608051610380516104a0516103e0518082101561072b57600080fd5b8082039050905060405181111561074157600080fd5b8082028080600081121561075157195b607f1c1561075e57600080fd5b9050905090508082038080600081121561077457195b607f1c1561078157600080fd5b90509050905081525061038080516104e051808201808060008112156107a357195b607f1c156107b057600080fd5b90509050905081525060006103605112156107cc576000610360525b60006103805112156107df576000610380525b6104a0516103e0526104a0516103a05261046051610480516104a051610440518082101561080c57600080fd5b80820390509050808202821582848304141761082757600080fd5b80905090509050670de0b6b3a76400008082049050905081818301101561084d57600080fd5b808201905090506103c0526103408051600181818301101561086e57600080fd5b80820190509050815250426104a051141561089157436103c0526108fa566108e9565b610340516c01431e0fae6d7217caa000000081106108ae57600080fd5b600460c052602060c0200160c052602060c0206103608051825580602001516001830155806040015160028301558060600151600383015550505b5b81516001018083528114156106b9575b50506103405160035560006101405118156109e25761038080516102a051610220518082038080600081121561092c57195b607f1c1561093957600080fd5b9050905090508082018080600081121561094f57195b607f1c1561095c57600080fd5b905090509050815250610360805161028051610200518082038080600081121561098257195b607f1c1561098f57600080fd5b905090509050808201808060008112156109a557195b607f1c156109b257600080fd5b90509050905081525060006103805112156109ce576000610380525b60006103605112156109e1576000610360525b5b610340516c01431e0fae6d7217caa000000081106109ff57600080fd5b600460c052602060c0200160c052602060c0206103608051825580602001516001830155806040015160028301558060600151600383015550506000610140511815610be05742610180511115610ad45761030080516102205180820180806000811215610a6957195b607f1c15610a7657600080fd5b905090509050815250610180516101c0511415610abd5761030080516102a05180820380806000811215610aa657195b607f1c15610ab357600080fd5b9050905090508152505b6103005160076101805160e05260c052604060c020555b426101c0511115610b3457610180516101c0511115610b335761032080516102a05180820380806000811215610b0657195b607f1c15610b1357600080fd5b9050905090508152506103205160076101c05160e05260c052604060c020555b5b60066101405160e05260c052604060c020546001818183011015610b5757600080fd5b808201905090506104c0526104c05160066101405160e05260c052604060c02055426102c052436102e0526104c051633b9aca008110610b9657600080fd5b60056101405160e05260c052604060c02060c052602060c0200160c052602060c0206102808051825580602001516001830155806040015160028301558060600151600383015550505b6101e051565b600015610e8e575b610200526101405261016052610180526101a0526101c0526101e0526102206101a080518252806020015182602001525050600154610260526102605161016051818183011015610c3e57600080fd5b8082019050905060015561028061022080518252806020015182602001525050610220805161016051604051811115610c7657600080fd5b80820180806000811215610c8657195b607f1c15610c9357600080fd5b9050905090508152506000610180511815610cb15761018051610240525b60026101405160e05260c052604060c02060c052602060c020610220805182558060200151600183015550506101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a051610140516102c0526102e061028080518252806020015182602001525050610320610220805182528060200151826020015250506103405161032051610300516102e0516102c05160065801610366565b6102a05261028052610260526102405261022052610200526101e0526101c0526101a0526101805261016052610140526000506000610160511815610df357602061038060646323b872dd6102c052610140516102e052306103005261016051610320526102dc60006000545af1610dd557600080fd5b601f3d11610de257600080fd5b60005061038051610df257600080fd5b5b610160516102c0526101e0516102e052426103005261024051610140517f4566dfc29f6f11d13a418c26a02bef7c28bae749d4de47e4e6a7cddea6730d5960606102c0a3610260516102c0526102605161016051818183011015610e5657600080fd5b808201905090506102e0527f5e2aa66efd74cce82b21852e317e5490d9ecc9e6bb953ae24d90851258cc2f5c60406102c0a161020051565b63c2c4c5c16000511415610f1e5760403661014037604036610180376101405161016051610180516101a05160006101c0526101e061014080518252806020015182602001525050610220610180805182528060200151826020015250506102405161022051610200516101e0516101c05160065801610366565b6101a052610180526101605261014052600050005b633a46273e60005114156110e65762ffffff5415610f3b57600080fd5b600162ffffff5560043560a01c15610f5257600080fd5b610140600260043560e05260c052604060c0208060c052602060c02054825260018160c052602060c020015482602001525050600060243511610f9457600080fd5b600061014051131515610fe6576308c379a06101805260206101a05260166101c0527f4e6f206578697374696e67206c6f636b20666f756e64000000000000000000006101e0526101c050606461019cfd5b426101605111151561105c576308c379a06101805260206101a05260246101c0527f43616e6e6f742061646420746f2065787069726564206c6f636b2e20576974686101e0527f6472617700000000000000000000000000000000000000000000000000000000610200526101c050608461019cfd5b6101405161016051600435610180526024356101a05260006101c0526101e0600260043560e05260c052604060c0208060c052602060c02054825260018160c052602060c02001548260200152505060006102205261022051610200516101e0516101c0516101a0516101805160065801610bee565b6101605261014052600050600062ffffff55005b6365fc387360005114156113385762ffffff541561110357600080fd5b600162ffffff553361014052610140516006580161015f565b60005060243562093a808082049050905062093a80808202821582848304141761114557600080fd5b809050905090506101405261016060023360e05260c052604060c0208060c052602060c02054825260018160c052602060c02001548260200152505060006004351161119057600080fd5b610160511515156111e0576308c379a06101a05260206101c05260196101e0527f5769746864726177206f6c6420746f6b656e7320666972737400000000000000610200526101e05060646101bcfd5b4261014051111515611256576308c379a06101a05260206101c05260266101e0527f43616e206f6e6c79206c6f636b20756e74696c2074696d6520696e2074686520610200527f6675747572650000000000000000000000000000000000000000000000000000610220526101e05060846101bcfd5b42630784ce0081818301101561126b57600080fd5b8082019050905061014051111515156112c3576308c379a06101a05260206101c052601e6101e0527f566f74696e67206c6f636b2063616e2062652034207965617273206d61780000610200526101e05060646101bcfd5b610140516101605161018051336101a0526004356101c052610140516101e052610200610160805182528060200151826020015250506001610240526102405161022051610200516101e0516101c0516101a05160065801610bee565b610180526101605261014052600050600062ffffff55005b634957677c60005114156114e45762ffffff541561135557600080fd5b600162ffffff553361014052610140516006580161015f565b60005061014060023360e05260c052604060c0208060c052602060c02054825260018160c052602060c0200154826020015250506000600435116113b157600080fd5b600061014051131515611403576308c379a06101805260206101a05260166101c0527f4e6f206578697374696e67206c6f636b20666f756e64000000000000000000006101e0526101c050606461019cfd5b4261016051111515611479576308c379a06101805260206101a05260246101c0527f43616e6e6f742061646420746f2065787069726564206c6f636b2e20576974686101e0527f6472617700000000000000000000000000000000000000000000000000000000610200526101c050608461019cfd5b610140516101605133610180526004356101a05260006101c0526101e06101408051825280602001518260200152505060026102205261022051610200516101e0516101c0516101a0516101805160065801610bee565b6101605261014052600050600062ffffff55005b63eff7a61260005114156117575762ffffff541561150157600080fd5b600162ffffff553361014052610140516006580161015f565b60005061014060023360e05260c052604060c0208060c052602060c02054825260018160c052602060c02001548260200152505060043562093a808082049050905062093a80808202821582848304141761157457600080fd5b809050905090506101805242610160511115156115d0576308c379a06101a05260206101c052600c6101e0527f4c6f636b20657870697265640000000000000000000000000000000000000000610200526101e05060646101bcfd5b600061014051131515611622576308c379a06101a05260206101c05260116101e0527f4e6f7468696e67206973206c6f636b6564000000000000000000000000000000610200526101e05060646101bcfd5b6101605161018051111515611676576308c379a06101a05260206101c052601f6101e0527f43616e206f6e6c7920696e637265617365206c6f636b206475726174696f6e00610200526101e05060646101bcfd5b42630784ce0081818301101561168b57600080fd5b8082019050905061018051111515156116e3576308c379a06101a05260206101c052601e6101e0527f566f74696e67206c6f636b2063616e2062652034207965617273206d61780000610200526101e05060646101bcfd5b610140516101605161018051336101a05260006101c052610180516101e052610200610140805182528060200151826020015250506003610240526102405161022051610200516101e0516101c0516101a05160065801610bee565b610180526101605261014052600050600062ffffff55005b633ccfd60b60005114156119e05762ffffff541561177457600080fd5b600162ffffff5561014060023360e05260c052604060c0208060c052602060c02054825260018160c052602060c0200154826020015250506101605142101515156117fe576308c379a06101805260206101a05260166101c0527f546865206c6f636b206469646e277420657870697265000000000000000000006101e0526101c050606461019cfd5b61014051600081121561181057600080fd5b610180526101a06101408051825280602001518260200152505060006101605260006101405260023360e05260c052604060c02060c052602060c020610140805182558060200151600183015550506001546101e0526101e051610180518082101561187b57600080fd5b808203905090506001556101405161016051610180516101a0516101c0516101e05133610200526102206101a08051825280602001518260200152505061026061014080518252806020015182602001525050610280516102605161024051610220516102005160065801610366565b6101e0526101c0526101a05261018052610160526101405260005060206102a0604463a9059cbb610200523361022052610180516102405261021c60006000545af161193657600080fd5b601f3d1161194357600080fd5b6000506102a05161195357600080fd5b61018051610200524261022052337ff279e6a1f5e320cca91135676d9cb6e44ca8a08c0b88342bcdb1144f6511b5686040610200a26101e051610200526101e05161018051808210156119a557600080fd5b80820390509050610220527f5e2aa66efd74cce82b21852e317e5490d9ecc9e6bb953ae24d90851258cc2f5c6040610200a1600062ffffff55005b600015611af5575b61018052610140526101605260006101a052610160516101c0526101e060006080818352015b6101c0516101a051101515611a2257611ae1565b6101a0516101c051818183011015611a3957600080fd5b808201905090506001818183011015611a5157600080fd5b8082019050905060028082049050905061020052610140516003610200516c01431e0fae6d7217caa00000008110611a8857600080fd5b600460c052602060c0200160c052602060c0200154111515611ab157610200516101a052611ad0565b61020051600180821015611ac457600080fd5b808203905090506101c0525b5b8151600101808352811415611a0e575b50506101a051600052600051610180515650005b6370a082316000511415611b0d574261014052611b32565b62fdd58e6000511415611b2a576020602461014037600050611b32565b600015611c93575b60043560a01c15611b4257600080fd5b600660043560e05260c052604060c0205461016052610160511515611b7157600060005260206000f350611c91565b61018061016051633b9aca008110611b8857600080fd5b600560043560e05260c052604060c02060c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c02001548260600152505061018080516101a051610140516101c05180821015611c0357600080fd5b80820390509050604051811115611c1957600080fd5b80820280806000811215611c2957195b607f1c15611c3657600080fd5b90509050905080820380806000811215611c4c57195b607f1c15611c5957600080fd5b9050905090508152506000610180511215611c75576000610180525b610180516000811215611c8757600080fd5b60005260206000f3505b005b634ee2cd7e600051141561216c5760043560a01c15611cb157600080fd5b436024351115611cc057600080fd5b600061014052600660043560e05260c052604060c020546101605261018060006080818352015b6101605161014051101515611cfb57611dbe565b6101405161016051818183011015611d1257600080fd5b808201905090506001818183011015611d2a57600080fd5b808201905090506002808204905090506101a05260243560036101a051633b9aca008110611d5757600080fd5b600560043560e05260c052604060c02060c052602060c0200160c052602060c0200154111515611d8e576101a05161014052611dad565b6101a051600180821015611da157600080fd5b80820390509050610160525b5b8151600101808352811415611ce7575b505061018061014051633b9aca008110611dd757600080fd5b600560043560e05260c052604060c02060c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c020015482606001525050600354610200526101405161016051610180516101a0516101c0516101e05161020051610220516024356102405261020051610260526102605161024051600658016119e8565b6102c05261022052610200526101e0526101c0526101a0526101805261016052610140526102c05161022052610240610220516c01431e0fae6d7217caa00000008110611ec757600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c0200154826060015250506040366102c03761020051610220511015611ff757610300610220516001818183011015611f4357600080fd5b808201905090506c01431e0fae6d7217caa00000008110611f6357600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c020015482606001525050610360516102a05180821015611fc757600080fd5b808203905090506102c052610340516102805180821015611fe757600080fd5b808203905090506102e052612032565b436102a0518082101561200957600080fd5b808203905090506102c05242610280518082101561202657600080fd5b808203905090506102e0525b610280516103005260006102c05118156120b45761030080516102e0516024356102a0518082101561206357600080fd5b80820390509050808202821582848304141761207e57600080fd5b809050905090506102c051808061209457600080fd5b8204905090508181830110156120a957600080fd5b808201905090508152505b61018080516101a051610300516101c051808210156120d257600080fd5b808203905090506040518111156120e857600080fd5b808202808060008112156120f857195b607f1c1561210557600080fd5b9050905090508082038080600081121561211b57195b607f1c1561212857600080fd5b90509050905081525060006101805112151561215e5761018051600081121561215057600080fd5b60005260206000f35061216a565b600060005260206000f3505b005b60001561235b575b6101e0526101405261016052610180526101a0526101c0526102006101408051825280602001518260200152806040015182604001528060600151826060015250506102405162093a808082049050905062093a8080820282158284830414176121dd57600080fd5b80905090509050610280526102a0600060ff818352015b610280805162093a8081818301101561220c57600080fd5b8082019050905081525060006102c0526101c051610280511115612237576101c0516102805261224e565b60076102805160e05260c052604060c020546102c0525b61020080516102205161028051610240518082101561226c57600080fd5b8082039050905060405181111561228257600080fd5b8082028080600081121561229257195b607f1c1561229f57600080fd5b905090509050808203808060008112156122b557195b607f1c156122c257600080fd5b9050905090508152506101c0516102805114156122de57612326565b61022080516102c051808201808060008112156122f757195b607f1c1561230457600080fd5b90509050905081525061028051610240525b81516001018083528114156121f4575b5050600061020051121561233b576000610200525b61020051600081121561234d57600080fd5b6000526000516101e0515650005b6318160ddd6000511415612373574261014052612399565b63bd85b0396000511415612391576020600461014037600050612399565b6000156124a1575b60035461016052610180610160516c01431e0fae6d7217caa000000081106123c057600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c0200154826060015250506101405161016051610180516101a0516101c0516101e0516102006101808051825280602001518260200152806040015182604001528060600151826060015250506101405161028052610280516102605161024051610220516102005160065801612174565b6102e0526101e0526101c0526101a0526101805261016052610140526102e05160005260206000f350005b63981b24d060005114156127e0574360043511156124be57600080fd5b60035461014052610140516101605160043561018052610140516101a0526101a05161018051600658016119e8565b6102005261016052610140526102005161016052610180610160516c01431e0fae6d7217caa0000000811061252157600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c020015482606001525050600061020052610140516101605110156126a25761022061016051600181818301101561259c57600080fd5b808201905090506c01431e0fae6d7217caa000000081106125bc57600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c020015482606001525050610280516101e051181561269d576004356101e0518082101561262d57600080fd5b80820390509050610260516101c0518082101561264957600080fd5b80820390509050808202821582848304141761266457600080fd5b80905090509050610280516101e0518082101561268057600080fd5b80820390509050808061269257600080fd5b820490509050610200525b61272c565b436101e051181561272b576004356101e051808210156126c157600080fd5b80820390509050426101c051808210156126da57600080fd5b8082039050905080820282158284830414176126f557600080fd5b80905090509050436101e0518082101561270e57600080fd5b80820390509050808061272057600080fd5b820490509050610200525b5b6101405161016051610180516101a0516101c0516101e051610200516102206101808051825280602001518260200152806040015182604001528060600151826060015250506101c0516102005181818301101561278957600080fd5b808201905090506102a0526102a0516102805161026051610240516102205160065801612174565b61030052610200526101e0526101c0526101a0526101805261016052610140526103005160005260206000f350005b633cebb82360005114156128145760043560a01c156127fe57600080fd5b600854331461280c57600080fd5b600435600855005b63fc0c546a60005114156128305760005460005260206000f350005b63047fc9aa600051141561284c5760015460005260206000f350005b63cbf9fe5f60005114156128bb5760043560a01c1561286a57600080fd5b600260043560e05260c052604060c0206101408080808460c052602060c0205481525050602081019050808060018560c052602060c02001548152505060409050905060c05260c051610140f39050005b63900cf0cf60005114156128d75760035460005260206000f350005b63d1febfb9600051141561297f576004356c01431e0fae6d7217caa0000000811061290157600080fd5b600460c052602060c020016101408080808460c052602060c0205481525050602081019050808060018560c052602060c020015481525050602081019050808060028560c052602060c020015481525050602081019050808060038560c052602060c02001548152505060809050905060c05260c051610140f39050005b6328d09d476000511415612a3c5760043560a01c1561299d57600080fd5b602435633b9aca0081106129b057600080fd5b600560043560e05260c052604060c02060c052602060c020016101408080808460c052602060c0205481525050602081019050808060018560c052602060c020015481525050602081019050808060028560c052602060c020015481525050602081019050808060038560c052602060c02001548152505060809050905060c05260c051610140f39050005b63010ae7576000511415612a765760043560a01c15612a5a57600080fd5b600660043560e05260c052604060c0205460005260206000f350005b63711974846000511415612aa057600760043560e05260c052604060c0205460005260206000f350005b63f77c47916000511415612abc5760085460005260206000f350005b63bef97c876000511415612ad85760095460005260206000f350005b6306fdde036000511415612b8157600a8060c052602060c020610180602082540161012060006003818352015b82610120516020021115612b1857612b3a565b61012051850154610120516020028501525b8151600101808352811415612b05575b50505050505061018051806101a001818260206001820306601f82010390500336823750506020610160526040610180510160206001820306601f8201039050610160f350005b6395d89b416000511415612c2a57600b8060c052602060c020610180602082540161012060006002818352015b82610120516020021115612bc157612be3565b61012051850154610120516020028501525b8151600101808352811415612bae575b50505050505061018051806101a001818260206001820306601f82010390500336823750506020610160526040610180510160206001820306601f8201039050610160f350005b6354fd4d506000511415612cd357600c8060c052602060c020610180602082540161012060006002818352015b82610120516020021115612c6a57612c8c565b61012051850154610120516020028501525b8151600101808352811415612c57575b50505050505061018051806101a001818260206001820306601f82010390500336823750506020610160526040610180510160206001820306601f8201039050610160f350005b63313ce5676000511415612cef57600d5460005260206000f350005b638ff36fd16000511415612d0b57600e5460005260206000f350005b637175d4f76000511415612d2757600f5460005260206000f350005b63f851a4406000511415612d435760105460005260206000f350005b6317f7182a6000511415612d5f5760115460005260206000f350005b5b60006000fd5b610280612fe603610280600039610280612fe6036000f3",
  "deployedBytecode": "0x341561000a57600080fd5b600436101561001857612d60565b600035601c526f7fffffffffffffffffffffffffffffff604052636b441a4060005114156100945760043560a01c1561005057600080fd5b601054331461005e57600080fd5b600435601155600435610140527f2f56810a6bf40af059b96d3aea4db54081f378029a518390491093a7b67032e96020610140a1005b636a1c05ae60005114156100ff5760105433146100b057600080fd5b60115461014052600061014051186100c757600080fd5b6101405160105561014051610160527febee2d5739011062cb4f14113f3b36bf0ffe3da5c0568f64189d1012a11891056020610160a1005b6357f901e260005114156101335760043560a01c1561011d57600080fd5b601054331461012b57600080fd5b600435600e55005b638e5b490f600051141561015757601054331461014f57600080fd5b600e54600f55005b600015610241575b61016052610140523261014051181561023b57600f546101805260006101805118156101d1576020610220602463c23697a86101a052610140516101c0526101bc6000610180515af16101b157600080fd5b601f3d116101be57600080fd5b60005061022051156101d05761016051565b5b6308c379a06101a05260206101c05260256101e0527f536d61727420636f6e7472616374206465706f7369746f7273206e6f7420616c610200527f6c6f776564000000000000000000000000000000000000000000000000000000610220526101e05060846101bcfd5b61016051565b637c74a17460005114156102b85760043560a01c1561025f57600080fd5b600660043560e05260c052604060c0205461014052600161014051633b9aca00811061028a57600080fd5b600560043560e05260c052604060c02060c052602060c0200160c052602060c020015460005260206000f350005b63da020a1860005114156103195760043560a01c156102d657600080fd5b6002602435633b9aca0081106102eb57600080fd5b600560043560e05260c052604060c02060c052602060c0200160c052602060c020015460005260206000f350005b63adc63589600051141561035e5760043560a01c1561033757600080fd5b6001600260043560e05260c052604060c02060c052602060c020015460005260206000f350005b600015610be6575b6101e0526101405261016052610180526101a0526101c052610140366102003760035461034052600061014051181561053557426101805111156103b057600061016051136103b3565b60005b1561043c5761016051630784ce00808205808060008112156103d157195b607f1c156103de57600080fd5b90509050905061022052610220516101805142808210156103fe57600080fd5b8082039050905060405181111561041457600080fd5b8082028080600081121561042457195b607f1c1561043157600080fd5b905090509050610200525b426101c05111156104535760006101a05113610456565b60005b156104df576101a051630784ce008082058080600081121561047457195b607f1c1561048157600080fd5b9050905090506102a0526102a0516101c05142808210156104a157600080fd5b808203905090506040518111156104b757600080fd5b808202808060008112156104c757195b607f1c156104d457600080fd5b905090509050610280525b60076101805160e05260c052604060c020546103005260006101c051181561053457610180516101c051141561051c576103005161032052610533565b60076101c05160e05260c052604060c02054610320525b5b5b61036060008152600081602001524281604001524381606001525060006103405111156105cc57610360610340516c01431e0fae6d7217caa0000000811061057c57600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c0200154826060015250505b6103a0516103e0526104006103608051825280602001518260200152806040015182604001528060600151826060015250506000610480526103a05142111561067b57670de0b6b3a7640000436103c0518082101561062a57600080fd5b80820390509050808202821582848304141761064557600080fd5b80905090509050426103a0518082101561065e57600080fd5b80820390509050808061067057600080fd5b820490509050610480525b6103e05162093a808082049050905062093a8080820282158284830414176106a257600080fd5b809050905090506104a0526104c0600060ff818352015b6104a0805162093a808181830110156106d157600080fd5b8082019050905081525060006104e052426104a05111156106f657426104a05261070d565b60076104a05160e05260c052604060c020546104e0525b6103608051610380516104a0516103e0518082101561072b57600080fd5b8082039050905060405181111561074157600080fd5b8082028080600081121561075157195b607f1c1561075e57600080fd5b9050905090508082038080600081121561077457195b607f1c1561078157600080fd5b90509050905081525061038080516104e051808201808060008112156107a357195b607f1c156107b057600080fd5b90509050905081525060006103605112156107cc576000610360525b60006103805112156107df576000610380525b6104a0516103e0526104a0516103a05261046051610480516104a051610440518082101561080c57600080fd5b80820390509050808202821582848304141761082757600080fd5b80905090509050670de0b6b3a76400008082049050905081818301101561084d57600080fd5b808201905090506103c0526103408051600181818301101561086e57600080fd5b80820190509050815250426104a051141561089157436103c0526108fa566108e9565b610340516c01431e0fae6d7217caa000000081106108ae57600080fd5b600460c052602060c0200160c052602060c0206103608051825580602001516001830155806040015160028301558060600151600383015550505b5b81516001018083528114156106b9575b50506103405160035560006101405118156109e25761038080516102a051610220518082038080600081121561092c57195b607f1c1561093957600080fd5b9050905090508082018080600081121561094f57195b607f1c1561095c57600080fd5b905090509050815250610360805161028051610200518082038080600081121561098257195b607f1c1561098f57600080fd5b905090509050808201808060008112156109a557195b607f1c156109b257600080fd5b90509050905081525060006103805112156109ce576000610380525b60006103605112156109e1576000610360525b5b610340516c01431e0fae6d7217caa000000081106109ff57600080fd5b600460c052602060c0200160c052602060c0206103608051825580602001516001830155806040015160028301558060600151600383015550506000610140511815610be05742610180511115610ad45761030080516102205180820180806000811215610a6957195b607f1c15610a7657600080fd5b905090509050815250610180516101c0511415610abd5761030080516102a05180820380806000811215610aa657195b607f1c15610ab357600080fd5b9050905090508152505b6103005160076101805160e05260c052604060c020555b426101c0511115610b3457610180516101c0511115610b335761032080516102a05180820380806000811215610b0657195b607f1c15610b1357600080fd5b9050905090508152506103205160076101c05160e05260c052604060c020555b5b60066101405160e05260c052604060c020546001818183011015610b5757600080fd5b808201905090506104c0526104c05160066101405160e05260c052604060c02055426102c052436102e0526104c051633b9aca008110610b9657600080fd5b60056101405160e05260c052604060c02060c052602060c0200160c052602060c0206102808051825580602001516001830155806040015160028301558060600151600383015550505b6101e051565b600015610e8e575b610200526101405261016052610180526101a0526101c0526101e0526102206101a080518252806020015182602001525050600154610260526102605161016051818183011015610c3e57600080fd5b8082019050905060015561028061022080518252806020015182602001525050610220805161016051604051811115610c7657600080fd5b80820180806000811215610c8657195b607f1c15610c9357600080fd5b9050905090508152506000610180511815610cb15761018051610240525b60026101405160e05260c052604060c02060c052602060c020610220805182558060200151600183015550506101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a051610140516102c0526102e061028080518252806020015182602001525050610320610220805182528060200151826020015250506103405161032051610300516102e0516102c05160065801610366565b6102a05261028052610260526102405261022052610200526101e0526101c0526101a0526101805261016052610140526000506000610160511815610df357602061038060646323b872dd6102c052610140516102e052306103005261016051610320526102dc60006000545af1610dd557600080fd5b601f3d11610de257600080fd5b60005061038051610df257600080fd5b5b610160516102c0526101e0516102e052426103005261024051610140517f4566dfc29f6f11d13a418c26a02bef7c28bae749d4de47e4e6a7cddea6730d5960606102c0a3610260516102c0526102605161016051818183011015610e5657600080fd5b808201905090506102e0527f5e2aa66efd74cce82b21852e317e5490d9ecc9e6bb953ae24d90851258cc2f5c60406102c0a161020051565b63c2c4c5c16000511415610f1e5760403661014037604036610180376101405161016051610180516101a05160006101c0526101e061014080518252806020015182602001525050610220610180805182528060200151826020015250506102405161022051610200516101e0516101c05160065801610366565b6101a052610180526101605261014052600050005b633a46273e60005114156110e65762ffffff5415610f3b57600080fd5b600162ffffff5560043560a01c15610f5257600080fd5b610140600260043560e05260c052604060c0208060c052602060c02054825260018160c052602060c020015482602001525050600060243511610f9457600080fd5b600061014051131515610fe6576308c379a06101805260206101a05260166101c0527f4e6f206578697374696e67206c6f636b20666f756e64000000000000000000006101e0526101c050606461019cfd5b426101605111151561105c576308c379a06101805260206101a05260246101c0527f43616e6e6f742061646420746f2065787069726564206c6f636b2e20576974686101e0527f6472617700000000000000000000000000000000000000000000000000000000610200526101c050608461019cfd5b6101405161016051600435610180526024356101a05260006101c0526101e0600260043560e05260c052604060c0208060c052602060c02054825260018160c052602060c02001548260200152505060006102205261022051610200516101e0516101c0516101a0516101805160065801610bee565b6101605261014052600050600062ffffff55005b6365fc387360005114156113385762ffffff541561110357600080fd5b600162ffffff553361014052610140516006580161015f565b60005060243562093a808082049050905062093a80808202821582848304141761114557600080fd5b809050905090506101405261016060023360e05260c052604060c0208060c052602060c02054825260018160c052602060c02001548260200152505060006004351161119057600080fd5b610160511515156111e0576308c379a06101a05260206101c05260196101e0527f5769746864726177206f6c6420746f6b656e7320666972737400000000000000610200526101e05060646101bcfd5b4261014051111515611256576308c379a06101a05260206101c05260266101e0527f43616e206f6e6c79206c6f636b20756e74696c2074696d6520696e2074686520610200527f6675747572650000000000000000000000000000000000000000000000000000610220526101e05060846101bcfd5b42630784ce0081818301101561126b57600080fd5b8082019050905061014051111515156112c3576308c379a06101a05260206101c052601e6101e0527f566f74696e67206c6f636b2063616e2062652034207965617273206d61780000610200526101e05060646101bcfd5b610140516101605161018051336101a0526004356101c052610140516101e052610200610160805182528060200151826020015250506001610240526102405161022051610200516101e0516101c0516101a05160065801610bee565b610180526101605261014052600050600062ffffff55005b634957677c60005114156114e45762ffffff541561135557600080fd5b600162ffffff553361014052610140516006580161015f565b60005061014060023360e05260c052604060c0208060c052602060c02054825260018160c052602060c0200154826020015250506000600435116113b157600080fd5b600061014051131515611403576308c379a06101805260206101a05260166101c0527f4e6f206578697374696e67206c6f636b20666f756e64000000000000000000006101e0526101c050606461019cfd5b4261016051111515611479576308c379a06101805260206101a05260246101c0527f43616e6e6f742061646420746f2065787069726564206c6f636b2e20576974686101e0527f6472617700000000000000000000000000000000000000000000000000000000610200526101c050608461019cfd5b610140516101605133610180526004356101a05260006101c0526101e06101408051825280602001518260200152505060026102205261022051610200516101e0516101c0516101a0516101805160065801610bee565b6101605261014052600050600062ffffff55005b63eff7a61260005114156117575762ffffff541561150157600080fd5b600162ffffff553361014052610140516006580161015f565b60005061014060023360e05260c052604060c0208060c052602060c02054825260018160c052602060c02001548260200152505060043562093a808082049050905062093a80808202821582848304141761157457600080fd5b809050905090506101805242610160511115156115d0576308c379a06101a05260206101c052600c6101e0527f4c6f636b20657870697265640000000000000000000000000000000000000000610200526101e05060646101bcfd5b600061014051131515611622576308c379a06101a05260206101c05260116101e0527f4e6f7468696e67206973206c6f636b6564000000000000000000000000000000610200526101e05060646101bcfd5b6101605161018051111515611676576308c379a06101a05260206101c052601f6101e0527f43616e206f6e6c7920696e637265617365206c6f636b206475726174696f6e00610200526101e05060646101bcfd5b42630784ce0081818301101561168b57600080fd5b8082019050905061018051111515156116e3576308c379a06101a05260206101c052601e6101e0527f566f74696e67206c6f636b2063616e2062652034207965617273206d61780000610200526101e05060646101bcfd5b610140516101605161018051336101a05260006101c052610180516101e052610200610140805182528060200151826020015250506003610240526102405161022051610200516101e0516101c0516101a05160065801610bee565b610180526101605261014052600050600062ffffff55005b633ccfd60b60005114156119e05762ffffff541561177457600080fd5b600162ffffff5561014060023360e05260c052604060c0208060c052602060c02054825260018160c052602060c0200154826020015250506101605142101515156117fe576308c379a06101805260206101a05260166101c0527f546865206c6f636b206469646e277420657870697265000000000000000000006101e0526101c050606461019cfd5b61014051600081121561181057600080fd5b610180526101a06101408051825280602001518260200152505060006101605260006101405260023360e05260c052604060c02060c052602060c020610140805182558060200151600183015550506001546101e0526101e051610180518082101561187b57600080fd5b808203905090506001556101405161016051610180516101a0516101c0516101e05133610200526102206101a08051825280602001518260200152505061026061014080518252806020015182602001525050610280516102605161024051610220516102005160065801610366565b6101e0526101c0526101a05261018052610160526101405260005060206102a0604463a9059cbb610200523361022052610180516102405261021c60006000545af161193657600080fd5b601f3d1161194357600080fd5b6000506102a05161195357600080fd5b61018051610200524261022052337ff279e6a1f5e320cca91135676d9cb6e44ca8a08c0b88342bcdb1144f6511b5686040610200a26101e051610200526101e05161018051808210156119a557600080fd5b80820390509050610220527f5e2aa66efd74cce82b21852e317e5490d9ecc9e6bb953ae24d90851258cc2f5c6040610200a1600062ffffff55005b600015611af5575b61018052610140526101605260006101a052610160516101c0526101e060006080818352015b6101c0516101a051101515611a2257611ae1565b6101a0516101c051818183011015611a3957600080fd5b808201905090506001818183011015611a5157600080fd5b8082019050905060028082049050905061020052610140516003610200516c01431e0fae6d7217caa00000008110611a8857600080fd5b600460c052602060c0200160c052602060c0200154111515611ab157610200516101a052611ad0565b61020051600180821015611ac457600080fd5b808203905090506101c0525b5b8151600101808352811415611a0e575b50506101a051600052600051610180515650005b6370a082316000511415611b0d574261014052611b32565b62fdd58e6000511415611b2a576020602461014037600050611b32565b600015611c93575b60043560a01c15611b4257600080fd5b600660043560e05260c052604060c0205461016052610160511515611b7157600060005260206000f350611c91565b61018061016051633b9aca008110611b8857600080fd5b600560043560e05260c052604060c02060c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c02001548260600152505061018080516101a051610140516101c05180821015611c0357600080fd5b80820390509050604051811115611c1957600080fd5b80820280806000811215611c2957195b607f1c15611c3657600080fd5b90509050905080820380806000811215611c4c57195b607f1c15611c5957600080fd5b9050905090508152506000610180511215611c75576000610180525b610180516000811215611c8757600080fd5b60005260206000f3505b005b634ee2cd7e600051141561216c5760043560a01c15611cb157600080fd5b436024351115611cc057600080fd5b600061014052600660043560e05260c052604060c020546101605261018060006080818352015b6101605161014051101515611cfb57611dbe565b6101405161016051818183011015611d1257600080fd5b808201905090506001818183011015611d2a57600080fd5b808201905090506002808204905090506101a05260243560036101a051633b9aca008110611d5757600080fd5b600560043560e05260c052604060c02060c052602060c0200160c052602060c0200154111515611d8e576101a05161014052611dad565b6101a051600180821015611da157600080fd5b80820390509050610160525b5b8151600101808352811415611ce7575b505061018061014051633b9aca008110611dd757600080fd5b600560043560e05260c052604060c02060c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c020015482606001525050600354610200526101405161016051610180516101a0516101c0516101e05161020051610220516024356102405261020051610260526102605161024051600658016119e8565b6102c05261022052610200526101e0526101c0526101a0526101805261016052610140526102c05161022052610240610220516c01431e0fae6d7217caa00000008110611ec757600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c0200154826060015250506040366102c03761020051610220511015611ff757610300610220516001818183011015611f4357600080fd5b808201905090506c01431e0fae6d7217caa00000008110611f6357600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c020015482606001525050610360516102a05180821015611fc757600080fd5b808203905090506102c052610340516102805180821015611fe757600080fd5b808203905090506102e052612032565b436102a0518082101561200957600080fd5b808203905090506102c05242610280518082101561202657600080fd5b808203905090506102e0525b610280516103005260006102c05118156120b45761030080516102e0516024356102a0518082101561206357600080fd5b80820390509050808202821582848304141761207e57600080fd5b809050905090506102c051808061209457600080fd5b8204905090508181830110156120a957600080fd5b808201905090508152505b61018080516101a051610300516101c051808210156120d257600080fd5b808203905090506040518111156120e857600080fd5b808202808060008112156120f857195b607f1c1561210557600080fd5b9050905090508082038080600081121561211b57195b607f1c1561212857600080fd5b90509050905081525060006101805112151561215e5761018051600081121561215057600080fd5b60005260206000f35061216a565b600060005260206000f3505b005b60001561235b575b6101e0526101405261016052610180526101a0526101c0526102006101408051825280602001518260200152806040015182604001528060600151826060015250506102405162093a808082049050905062093a8080820282158284830414176121dd57600080fd5b80905090509050610280526102a0600060ff818352015b610280805162093a8081818301101561220c57600080fd5b8082019050905081525060006102c0526101c051610280511115612237576101c0516102805261224e565b60076102805160e05260c052604060c020546102c0525b61020080516102205161028051610240518082101561226c57600080fd5b8082039050905060405181111561228257600080fd5b8082028080600081121561229257195b607f1c1561229f57600080fd5b905090509050808203808060008112156122b557195b607f1c156122c257600080fd5b9050905090508152506101c0516102805114156122de57612326565b61022080516102c051808201808060008112156122f757195b607f1c1561230457600080fd5b90509050905081525061028051610240525b81516001018083528114156121f4575b5050600061020051121561233b576000610200525b61020051600081121561234d57600080fd5b6000526000516101e0515650005b6318160ddd6000511415612373574261014052612399565b63bd85b0396000511415612391576020600461014037600050612399565b6000156124a1575b60035461016052610180610160516c01431e0fae6d7217caa000000081106123c057600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c0200154826060015250506101405161016051610180516101a0516101c0516101e0516102006101808051825280602001518260200152806040015182604001528060600151826060015250506101405161028052610280516102605161024051610220516102005160065801612174565b6102e0526101e0526101c0526101a0526101805261016052610140526102e05160005260206000f350005b63981b24d060005114156127e0574360043511156124be57600080fd5b60035461014052610140516101605160043561018052610140516101a0526101a05161018051600658016119e8565b6102005261016052610140526102005161016052610180610160516c01431e0fae6d7217caa0000000811061252157600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c020015482606001525050600061020052610140516101605110156126a25761022061016051600181818301101561259c57600080fd5b808201905090506c01431e0fae6d7217caa000000081106125bc57600080fd5b600460c052602060c020018060c052602060c02054825260018160c052602060c0200154826020015260028160c052602060c0200154826040015260038160c052602060c020015482606001525050610280516101e051181561269d576004356101e0518082101561262d57600080fd5b80820390509050610260516101c0518082101561264957600080fd5b80820390509050808202821582848304141761266457600080fd5b80905090509050610280516101e0518082101561268057600080fd5b80820390509050808061269257600080fd5b820490509050610200525b61272c565b436101e051181561272b576004356101e051808210156126c157600080fd5b80820390509050426101c051808210156126da57600080fd5b8082039050905080820282158284830414176126f557600080fd5b80905090509050436101e0518082101561270e57600080fd5b80820390509050808061272057600080fd5b820490509050610200525b5b6101405161016051610180516101a0516101c0516101e051610200516102206101808051825280602001518260200152806040015182604001528060600151826060015250506101c0516102005181818301101561278957600080fd5b808201905090506102a0526102a0516102805161026051610240516102205160065801612174565b61030052610200526101e0526101c0526101a0526101805261016052610140526103005160005260206000f350005b633cebb82360005114156128145760043560a01c156127fe57600080fd5b600854331461280c57600080fd5b600435600855005b63fc0c546a60005114156128305760005460005260206000f350005b63047fc9aa600051141561284c5760015460005260206000f350005b63cbf9fe5f60005114156128bb5760043560a01c1561286a57600080fd5b600260043560e05260c052604060c0206101408080808460c052602060c0205481525050602081019050808060018560c052602060c02001548152505060409050905060c05260c051610140f39050005b63900cf0cf60005114156128d75760035460005260206000f350005b63d1febfb9600051141561297f576004356c01431e0fae6d7217caa0000000811061290157600080fd5b600460c052602060c020016101408080808460c052602060c0205481525050602081019050808060018560c052602060c020015481525050602081019050808060028560c052602060c020015481525050602081019050808060038560c052602060c02001548152505060809050905060c05260c051610140f39050005b6328d09d476000511415612a3c5760043560a01c1561299d57600080fd5b602435633b9aca0081106129b057600080fd5b600560043560e05260c052604060c02060c052602060c020016101408080808460c052602060c0205481525050602081019050808060018560c052602060c020015481525050602081019050808060028560c052602060c020015481525050602081019050808060038560c052602060c02001548152505060809050905060c05260c051610140f39050005b63010ae7576000511415612a765760043560a01c15612a5a57600080fd5b600660043560e05260c052604060c0205460005260206000f350005b63711974846000511415612aa057600760043560e05260c052604060c0205460005260206000f350005b63f77c47916000511415612abc5760085460005260206000f350005b63bef97c876000511415612ad85760095460005260206000f350005b6306fdde036000511415612b8157600a8060c052602060c020610180602082540161012060006003818352015b82610120516020021115612b1857612b3a565b61012051850154610120516020028501525b8151600101808352811415612b05575b50505050505061018051806101a001818260206001820306601f82010390500336823750506020610160526040610180510160206001820306601f8201039050610160f350005b6395d89b416000511415612c2a57600b8060c052602060c020610180602082540161012060006002818352015b82610120516020021115612bc157612be3565b61012051850154610120516020028501525b8151600101808352811415612bae575b50505050505061018051806101a001818260206001820306601f82010390500336823750506020610160526040610180510160206001820306601f8201039050610160f350005b6354fd4d506000511415612cd357600c8060c052602060c020610180602082540161012060006002818352015b82610120516020021115612c6a57612c8c565b61012051850154610120516020028501525b8151600101808352811415612c57575b50505050505061018051806101a001818260206001820306601f82010390500336823750506020610160526040610180510160206001820306601f8201039050610160f350005b63313ce5676000511415612cef57600d5460005260206000f350005b638ff36fd16000511415612d0b57600e5460005260206000f350005b637175d4f76000511415612d2757600f5460005260206000f350005b63f851a4406000511415612d435760105460005260206000f350005b6317f7182a6000511415612d5f5760115460005260206000f350005b5b60006000fd",
  "source": "# @version 0.2.8\r\n\"\"\"\r\n@title Voting Escrow\r\n@author Curve Finance\r\n@license MIT\r\n@notice Votes have a weight depending on time, so that users are\r\n        committed to the future of (whatever they are voting for)\r\n@dev Vote weight decays linearly over time. Lock time cannot be\r\n     more than `MAXTIME` (4 years).\r\n\"\"\"\r\n\r\n# Voting escrow to have time-weighted votes\r\n# Votes have a weight depending on time, so that users are committed\r\n# to the future of (whatever they are voting for).\r\n# The weight in this implementation is linear, and lock cannot be more than maxtime:\r\n# w ^\r\n# 1 +        /\r\n#   |      /\r\n#   |    /\r\n#   |  /\r\n#   |/\r\n# 0 +--------+------> time\r\n#       maxtime (4 years?)\r\n\r\nstruct Point:\r\n    bias: int128\r\n    slope: int128  # - dweight / dt\r\n    ts: uint256\r\n    blk: uint256  # block\r\n# We cannot really do block numbers per se b/c slope is per time, not per block\r\n# and per block could be fairly bad b/c Ethereum changes blocktimes.\r\n# What we can do is to extrapolate ***At functions\r\n\r\nstruct LockedBalance:\r\n    amount: int128\r\n    end: uint256\r\n\r\n\r\ninterface ERC20:\r\n    def decimals() -> uint256: view\r\n    def name() -> String[64]: view\r\n    def symbol() -> String[32]: view\r\n    def transfer(to: address, amount: uint256) -> bool: nonpayable\r\n    def transferFrom(spender: address, to: address, amount: uint256) -> bool: nonpayable\r\n\r\n\r\n# Interface for checking whether address belongs to a whitelisted\r\n# type of a smart wallet.\r\n# When new types are added - the whole contract is changed\r\n# The check() method is modifying to be able to use caching\r\n# for individual wallet addresses\r\ninterface SmartWalletChecker:\r\n    def check(addr: address) -> bool: nonpayable\r\n\r\nDEPOSIT_FOR_TYPE: constant(int128) = 0\r\nCREATE_LOCK_TYPE: constant(int128) = 1\r\nINCREASE_LOCK_AMOUNT: constant(int128) = 2\r\nINCREASE_UNLOCK_TIME: constant(int128) = 3\r\n\r\n\r\nevent CommitOwnership:\r\n    admin: address\r\n\r\nevent ApplyOwnership:\r\n    admin: address\r\n\r\nevent Deposit:\r\n    provider: indexed(address)\r\n    value: uint256\r\n    locktime: indexed(uint256)\r\n    type: int128\r\n    ts: uint256\r\n\r\nevent Withdraw:\r\n    provider: indexed(address)\r\n    value: uint256\r\n    ts: uint256\r\n\r\nevent Supply:\r\n    prevSupply: uint256\r\n    supply: uint256\r\n\r\n\r\nWEEK: constant(uint256) = 7 * 86400  # all future times are rounded by week\r\nMAXTIME: constant(uint256) = 4 * 365 * 86400  # 4 years\r\nMULTIPLIER: constant(uint256) = 10 ** 18\r\n\r\ntoken: public(address)\r\nsupply: public(uint256)\r\n\r\nlocked: public(HashMap[address, LockedBalance])\r\n\r\nepoch: public(uint256)\r\npoint_history: public(Point[100000000000000000000000000000])  # epoch -> unsigned point\r\nuser_point_history: public(HashMap[address, Point[1000000000]])  # user -> Point[user_epoch]\r\nuser_point_epoch: public(HashMap[address, uint256])\r\nslope_changes: public(HashMap[uint256, int128])  # time -> signed slope change\r\n\r\n# Aragon's view methods for compatibility\r\ncontroller: public(address)\r\ntransfersEnabled: public(bool)\r\n\r\nname: public(String[64])\r\nsymbol: public(String[32])\r\nversion: public(String[32])\r\ndecimals: public(uint256)\r\n\r\n# Checker for whitelisted (smart contract) wallets which are allowed to deposit\r\n# The goal is to prevent tokenizing the escrow\r\nfuture_smart_wallet_checker: public(address)\r\nsmart_wallet_checker: public(address)\r\n\r\nadmin: public(address)  # Can and will be a smart contract\r\nfuture_admin: public(address)\r\n\r\n\r\n@external\r\ndef __init__(token_addr: address, _name: String[64], _symbol: String[32], _version: String[32]):\r\n    \"\"\"\r\n    @notice Contract constructor\r\n    @param token_addr `ERC20CRV` token address\r\n    @param _name Token name\r\n    @param _symbol Token symbol\r\n    @param _version Contract version - required for Aragon compatibility\r\n    \"\"\"\r\n    self.admin = msg.sender\r\n    self.token = token_addr\r\n    self.point_history[0].blk = block.number\r\n    self.point_history[0].ts = block.timestamp\r\n    self.controller = msg.sender\r\n    self.transfersEnabled = True\r\n\r\n    _decimals: uint256 = ERC20(token_addr).decimals()\r\n    assert _decimals <= 255\r\n    self.decimals = _decimals\r\n\r\n    self.name = _name\r\n    self.symbol = _symbol\r\n    self.version = _version\r\n\r\n\r\n@external\r\ndef commit_transfer_ownership(addr: address):\r\n    \"\"\"\r\n    @notice Transfer ownership of VotingEscrow contract to `addr`\r\n    @param addr Address to have ownership transferred to\r\n    \"\"\"\r\n    assert msg.sender == self.admin  # dev: admin only\r\n    self.future_admin = addr\r\n    log CommitOwnership(addr)\r\n\r\n\r\n@external\r\ndef apply_transfer_ownership():\r\n    \"\"\"\r\n    @notice Apply ownership transfer\r\n    \"\"\"\r\n    assert msg.sender == self.admin  # dev: admin only\r\n    _admin: address = self.future_admin\r\n    assert _admin != ZERO_ADDRESS  # dev: admin not set\r\n    self.admin = _admin\r\n    log ApplyOwnership(_admin)\r\n\r\n\r\n@external\r\ndef commit_smart_wallet_checker(addr: address):\r\n    \"\"\"\r\n    @notice Set an external contract to check for approved smart contract wallets\r\n    @param addr Address of Smart contract checker\r\n    \"\"\"\r\n    assert msg.sender == self.admin\r\n    self.future_smart_wallet_checker = addr\r\n\r\n\r\n@external\r\ndef apply_smart_wallet_checker():\r\n    \"\"\"\r\n    @notice Apply setting external contract to check approved smart contract wallets\r\n    \"\"\"\r\n    assert msg.sender == self.admin\r\n    self.smart_wallet_checker = self.future_smart_wallet_checker\r\n\r\n\r\n@internal\r\ndef assert_not_contract(addr: address):\r\n    \"\"\"\r\n    @notice Check if the call is from a whitelisted smart contract, revert if not\r\n    @param addr Address to be checked\r\n    \"\"\"\r\n    if addr != tx.origin:\r\n        checker: address = self.smart_wallet_checker\r\n        if checker != ZERO_ADDRESS:\r\n            if SmartWalletChecker(checker).check(addr):\r\n                return\r\n        raise \"Smart contract depositors not allowed\"\r\n\r\n\r\n@external\r\n@view\r\ndef get_last_user_slope(addr: address) -> int128:\r\n    \"\"\"\r\n    @notice Get the most recently recorded rate of voting power decrease for `addr`\r\n    @param addr Address of the user wallet\r\n    @return Value of the slope\r\n    \"\"\"\r\n    uepoch: uint256 = self.user_point_epoch[addr]\r\n    return self.user_point_history[addr][uepoch].slope\r\n\r\n\r\n@external\r\n@view\r\ndef user_point_history__ts(_addr: address, _idx: uint256) -> uint256:\r\n    \"\"\"\r\n    @notice Get the timestamp for checkpoint `_idx` for `_addr`\r\n    @param _addr User wallet address\r\n    @param _idx User epoch number\r\n    @return Epoch time of the checkpoint\r\n    \"\"\"\r\n    return self.user_point_history[_addr][_idx].ts\r\n\r\n\r\n@external\r\n@view\r\ndef locked__end(_addr: address) -> uint256:\r\n    \"\"\"\r\n    @notice Get timestamp when `_addr`'s lock finishes\r\n    @param _addr User wallet\r\n    @return Epoch time of the lock end\r\n    \"\"\"\r\n    return self.locked[_addr].end\r\n\r\n\r\n@internal\r\ndef _checkpoint(addr: address, old_locked: LockedBalance, new_locked: LockedBalance):\r\n    \"\"\"\r\n    @notice Record global and per-user data to checkpoint\r\n    @param addr User's wallet address. No user checkpoint if 0x0\r\n    @param old_locked Pevious locked amount / end lock time for the user\r\n    @param new_locked New locked amount / end lock time for the user\r\n    \"\"\"\r\n    u_old: Point = empty(Point)\r\n    u_new: Point = empty(Point)\r\n    old_dslope: int128 = 0\r\n    new_dslope: int128 = 0\r\n    _epoch: uint256 = self.epoch\r\n\r\n    if addr != ZERO_ADDRESS:\r\n        # Calculate slopes and biases\r\n        # Kept at zero when they have to\r\n        if old_locked.end > block.timestamp and old_locked.amount > 0:\r\n            u_old.slope = old_locked.amount / MAXTIME\r\n            u_old.bias = u_old.slope * convert(old_locked.end - block.timestamp, int128)\r\n        if new_locked.end > block.timestamp and new_locked.amount > 0:\r\n            u_new.slope = new_locked.amount / MAXTIME\r\n            u_new.bias = u_new.slope * convert(new_locked.end - block.timestamp, int128)\r\n\r\n        # Read values of scheduled changes in the slope\r\n        # old_locked.end can be in the past and in the future\r\n        # new_locked.end can ONLY by in the FUTURE unless everything expired: than zeros\r\n        old_dslope = self.slope_changes[old_locked.end]\r\n        if new_locked.end != 0:\r\n            if new_locked.end == old_locked.end:\r\n                new_dslope = old_dslope\r\n            else:\r\n                new_dslope = self.slope_changes[new_locked.end]\r\n\r\n    last_point: Point = Point({bias: 0, slope: 0, ts: block.timestamp, blk: block.number})\r\n    if _epoch > 0:\r\n        last_point = self.point_history[_epoch]\r\n    last_checkpoint: uint256 = last_point.ts\r\n    # initial_last_point is used for extrapolation to calculate block number\r\n    # (approximately, for *At methods) and save them\r\n    # as we cannot figure that out exactly from inside the contract\r\n    initial_last_point: Point = last_point\r\n    block_slope: uint256 = 0  # dblock/dt\r\n    if block.timestamp > last_point.ts:\r\n        block_slope = MULTIPLIER * (block.number - last_point.blk) / (block.timestamp - last_point.ts)\r\n    # If last point is already recorded in this block, slope=0\r\n    # But that's ok b/c we know the block in such case\r\n\r\n    # Go over weeks to fill history and calculate what the current point is\r\n    t_i: uint256 = (last_checkpoint / WEEK) * WEEK\r\n    for i in range(255):\r\n        # Hopefully it won't happen that this won't get used in 5 years!\r\n        # If it does, users will be able to withdraw but vote weight will be broken\r\n        t_i += WEEK\r\n        d_slope: int128 = 0\r\n        if t_i > block.timestamp:\r\n            t_i = block.timestamp\r\n        else:\r\n            d_slope = self.slope_changes[t_i]\r\n        last_point.bias -= last_point.slope * convert(t_i - last_checkpoint, int128)\r\n        last_point.slope += d_slope\r\n        if last_point.bias < 0:  # This can happen\r\n            last_point.bias = 0\r\n        if last_point.slope < 0:  # This cannot happen - just in case\r\n            last_point.slope = 0\r\n        last_checkpoint = t_i\r\n        last_point.ts = t_i\r\n        last_point.blk = initial_last_point.blk + block_slope * (t_i - initial_last_point.ts) / MULTIPLIER\r\n        _epoch += 1\r\n        if t_i == block.timestamp:\r\n            last_point.blk = block.number\r\n            break\r\n        else:\r\n            self.point_history[_epoch] = last_point\r\n\r\n    self.epoch = _epoch\r\n    # Now point_history is filled until t=now\r\n\r\n    if addr != ZERO_ADDRESS:\r\n        # If last point was in this block, the slope change has been applied already\r\n        # But in such case we have 0 slope(s)\r\n        last_point.slope += (u_new.slope - u_old.slope)\r\n        last_point.bias += (u_new.bias - u_old.bias)\r\n        if last_point.slope < 0:\r\n            last_point.slope = 0\r\n        if last_point.bias < 0:\r\n            last_point.bias = 0\r\n\r\n    # Record the changed point into history\r\n    self.point_history[_epoch] = last_point\r\n\r\n    if addr != ZERO_ADDRESS:\r\n        # Schedule the slope changes (slope is going down)\r\n        # We subtract new_user_slope from [new_locked.end]\r\n        # and add old_user_slope to [old_locked.end]\r\n        if old_locked.end > block.timestamp:\r\n            # old_dslope was <something> - u_old.slope, so we cancel that\r\n            old_dslope += u_old.slope\r\n            if new_locked.end == old_locked.end:\r\n                old_dslope -= u_new.slope  # It was a new deposit, not extension\r\n            self.slope_changes[old_locked.end] = old_dslope\r\n\r\n        if new_locked.end > block.timestamp:\r\n            if new_locked.end > old_locked.end:\r\n                new_dslope -= u_new.slope  # old slope disappeared at this point\r\n                self.slope_changes[new_locked.end] = new_dslope\r\n            # else: we recorded it already in old_dslope\r\n\r\n        # Now handle user history\r\n        user_epoch: uint256 = self.user_point_epoch[addr] + 1\r\n\r\n        self.user_point_epoch[addr] = user_epoch\r\n        u_new.ts = block.timestamp\r\n        u_new.blk = block.number\r\n        self.user_point_history[addr][user_epoch] = u_new\r\n\r\n\r\n@internal\r\ndef _deposit_for(_addr: address, _value: uint256, unlock_time: uint256, locked_balance: LockedBalance, type: int128):\r\n    \"\"\"\r\n    @notice Deposit and lock tokens for a user\r\n    @param _addr User's wallet address\r\n    @param _value Amount to deposit\r\n    @param unlock_time New time when to unlock the tokens, or 0 if unchanged\r\n    @param locked_balance Previous locked amount / timestamp\r\n    \"\"\"\r\n    _locked: LockedBalance = locked_balance\r\n    supply_before: uint256 = self.supply\r\n\r\n    self.supply = supply_before + _value\r\n    old_locked: LockedBalance = _locked\r\n    # Adding to existing lock, or if a lock is expired - creating a new one\r\n    _locked.amount += convert(_value, int128)\r\n    if unlock_time != 0:\r\n        _locked.end = unlock_time\r\n    self.locked[_addr] = _locked\r\n\r\n    # Possibilities:\r\n    # Both old_locked.end could be current or expired (>/< block.timestamp)\r\n    # value == 0 (extend lock) or value > 0 (add to lock or extend lock)\r\n    # _locked.end > block.timestamp (always)\r\n    self._checkpoint(_addr, old_locked, _locked)\r\n\r\n    if _value != 0:\r\n        assert ERC20(self.token).transferFrom(_addr, self, _value)\r\n\r\n    log Deposit(_addr, _value, _locked.end, type, block.timestamp)\r\n    log Supply(supply_before, supply_before + _value)\r\n\r\n\r\n@external\r\ndef checkpoint():\r\n    \"\"\"\r\n    @notice Record global data to checkpoint\r\n    \"\"\"\r\n    self._checkpoint(ZERO_ADDRESS, empty(LockedBalance), empty(LockedBalance))\r\n\r\n\r\n@external\r\n@nonreentrant('lock')\r\ndef deposit_for(_addr: address, _value: uint256):\r\n    \"\"\"\r\n    @notice Deposit `_value` tokens for `_addr` and add to the lock\r\n    @dev Anyone (even a smart contract) can deposit for someone else, but\r\n         cannot extend their locktime and deposit for a brand new user\r\n    @param _addr User's wallet address\r\n    @param _value Amount to add to user's lock\r\n    \"\"\"\r\n    _locked: LockedBalance = self.locked[_addr]\r\n\r\n    assert _value > 0  # dev: need non-zero value\r\n    assert _locked.amount > 0, \"No existing lock found\"\r\n    assert _locked.end > block.timestamp, \"Cannot add to expired lock. Withdraw\"\r\n\r\n    self._deposit_for(_addr, _value, 0, self.locked[_addr], DEPOSIT_FOR_TYPE)\r\n\r\n\r\n@external\r\n@nonreentrant('lock')\r\ndef create_lock(_value: uint256, _unlock_time: uint256):\r\n    \"\"\"\r\n    @notice Deposit `_value` tokens for `msg.sender` and lock until `_unlock_time`\r\n    @param _value Amount to deposit\r\n    @param _unlock_time Epoch time when tokens unlock, rounded down to whole weeks\r\n    \"\"\"\r\n    self.assert_not_contract(msg.sender)\r\n    unlock_time: uint256 = (_unlock_time / WEEK) * WEEK  # Locktime is rounded down to weeks\r\n    _locked: LockedBalance = self.locked[msg.sender]\r\n\r\n    assert _value > 0  # dev: need non-zero value\r\n    assert _locked.amount == 0, \"Withdraw old tokens first\"\r\n    assert unlock_time > block.timestamp, \"Can only lock until time in the future\"\r\n    assert unlock_time <= block.timestamp + MAXTIME, \"Voting lock can be 4 years max\"\r\n\r\n    self._deposit_for(msg.sender, _value, unlock_time, _locked, CREATE_LOCK_TYPE)\r\n\r\n\r\n@external\r\n@nonreentrant('lock')\r\ndef increase_amount(_value: uint256):\r\n    \"\"\"\r\n    @notice Deposit `_value` additional tokens for `msg.sender`\r\n            without modifying the unlock time\r\n    @param _value Amount of tokens to deposit and add to the lock\r\n    \"\"\"\r\n    self.assert_not_contract(msg.sender)\r\n    _locked: LockedBalance = self.locked[msg.sender]\r\n\r\n    assert _value > 0  # dev: need non-zero value\r\n    assert _locked.amount > 0, \"No existing lock found\"\r\n    assert _locked.end > block.timestamp, \"Cannot add to expired lock. Withdraw\"\r\n\r\n    self._deposit_for(msg.sender, _value, 0, _locked, INCREASE_LOCK_AMOUNT)\r\n\r\n\r\n@external\r\n@nonreentrant('lock')\r\ndef increase_unlock_time(_unlock_time: uint256):\r\n    \"\"\"\r\n    @notice Extend the unlock time for `msg.sender` to `_unlock_time`\r\n    @param _unlock_time New epoch time for unlocking\r\n    \"\"\"\r\n    self.assert_not_contract(msg.sender)\r\n    _locked: LockedBalance = self.locked[msg.sender]\r\n    unlock_time: uint256 = (_unlock_time / WEEK) * WEEK  # Locktime is rounded down to weeks\r\n\r\n    assert _locked.end > block.timestamp, \"Lock expired\"\r\n    assert _locked.amount > 0, \"Nothing is locked\"\r\n    assert unlock_time > _locked.end, \"Can only increase lock duration\"\r\n    assert unlock_time <= block.timestamp + MAXTIME, \"Voting lock can be 4 years max\"\r\n\r\n    self._deposit_for(msg.sender, 0, unlock_time, _locked, INCREASE_UNLOCK_TIME)\r\n\r\n\r\n@external\r\n@nonreentrant('lock')\r\ndef withdraw():\r\n    \"\"\"\r\n    @notice Withdraw all tokens for `msg.sender`\r\n    @dev Only possible if the lock has expired\r\n    \"\"\"\r\n    _locked: LockedBalance = self.locked[msg.sender]\r\n    assert block.timestamp >= _locked.end, \"The lock didn't expire\"\r\n    value: uint256 = convert(_locked.amount, uint256)\r\n\r\n    old_locked: LockedBalance = _locked\r\n    _locked.end = 0\r\n    _locked.amount = 0\r\n    self.locked[msg.sender] = _locked\r\n    supply_before: uint256 = self.supply\r\n    self.supply = supply_before - value\r\n\r\n    # old_locked can have either expired <= timestamp or zero end\r\n    # _locked has only 0 end\r\n    # Both can have >= 0 amount\r\n    self._checkpoint(msg.sender, old_locked, _locked)\r\n\r\n    assert ERC20(self.token).transfer(msg.sender, value)\r\n\r\n    log Withdraw(msg.sender, value, block.timestamp)\r\n    log Supply(supply_before, supply_before - value)\r\n\r\n\r\n# The following ERC20/minime-compatible methods are not real balanceOf and supply!\r\n# They measure the weights for the purpose of voting, so they don't represent\r\n# real coins.\r\n\r\n@internal\r\n@view\r\ndef find_block_epoch(_block: uint256, max_epoch: uint256) -> uint256:\r\n    \"\"\"\r\n    @notice Binary search to estimate timestamp for block number\r\n    @param _block Block to find\r\n    @param max_epoch Don't go beyond this epoch\r\n    @return Approximate timestamp for block\r\n    \"\"\"\r\n    # Binary search\r\n    _min: uint256 = 0\r\n    _max: uint256 = max_epoch\r\n    for i in range(128):  # Will be always enough for 128-bit numbers\r\n        if _min >= _max:\r\n            break\r\n        _mid: uint256 = (_min + _max + 1) / 2\r\n        if self.point_history[_mid].blk <= _block:\r\n            _min = _mid\r\n        else:\r\n            _max = _mid - 1\r\n    return _min\r\n\r\n\r\n@external\r\n@view\r\ndef balanceOf(addr: address, _t: uint256 = block.timestamp) -> uint256:\r\n    \"\"\"\r\n    @notice Get the current voting power for `msg.sender`\r\n    @dev Adheres to the ERC20 `balanceOf` interface for Aragon compatibility\r\n    @param addr User wallet address\r\n    @param _t Epoch time to return voting power at\r\n    @return User voting power\r\n    \"\"\"\r\n    _epoch: uint256 = self.user_point_epoch[addr]\r\n    if _epoch == 0:\r\n        return 0\r\n    else:\r\n        last_point: Point = self.user_point_history[addr][_epoch]\r\n        last_point.bias -= last_point.slope * convert(_t - last_point.ts, int128)\r\n        if last_point.bias < 0:\r\n            last_point.bias = 0\r\n        return convert(last_point.bias, uint256)\r\n\r\n\r\n@external\r\n@view\r\ndef balanceOfAt(addr: address, _block: uint256) -> uint256:\r\n    \"\"\"\r\n    @notice Measure voting power of `addr` at block height `_block`\r\n    @dev Adheres to MiniMe `balanceOfAt` interface: https://github.com/Giveth/minime\r\n    @param addr User's wallet address\r\n    @param _block Block to calculate the voting power at\r\n    @return Voting power\r\n    \"\"\"\r\n    # Copying and pasting totalSupply code because Vyper cannot pass by\r\n    # reference yet\r\n    assert _block <= block.number\r\n\r\n    # Binary search\r\n    _min: uint256 = 0\r\n    _max: uint256 = self.user_point_epoch[addr]\r\n    for i in range(128):  # Will be always enough for 128-bit numbers\r\n        if _min >= _max:\r\n            break\r\n        _mid: uint256 = (_min + _max + 1) / 2\r\n        if self.user_point_history[addr][_mid].blk <= _block:\r\n            _min = _mid\r\n        else:\r\n            _max = _mid - 1\r\n\r\n    upoint: Point = self.user_point_history[addr][_min]\r\n\r\n    max_epoch: uint256 = self.epoch\r\n    _epoch: uint256 = self.find_block_epoch(_block, max_epoch)\r\n    point_0: Point = self.point_history[_epoch]\r\n    d_block: uint256 = 0\r\n    d_t: uint256 = 0\r\n    if _epoch < max_epoch:\r\n        point_1: Point = self.point_history[_epoch + 1]\r\n        d_block = point_1.blk - point_0.blk\r\n        d_t = point_1.ts - point_0.ts\r\n    else:\r\n        d_block = block.number - point_0.blk\r\n        d_t = block.timestamp - point_0.ts\r\n    block_time: uint256 = point_0.ts\r\n    if d_block != 0:\r\n        block_time += d_t * (_block - point_0.blk) / d_block\r\n\r\n    upoint.bias -= upoint.slope * convert(block_time - upoint.ts, int128)\r\n    if upoint.bias >= 0:\r\n        return convert(upoint.bias, uint256)\r\n    else:\r\n        return 0\r\n\r\n\r\n@internal\r\n@view\r\ndef supply_at(point: Point, t: uint256) -> uint256:\r\n    \"\"\"\r\n    @notice Calculate total voting power at some point in the past\r\n    @param point The point (bias/slope) to start search from\r\n    @param t Time to calculate the total voting power at\r\n    @return Total voting power at that time\r\n    \"\"\"\r\n    last_point: Point = point\r\n    t_i: uint256 = (last_point.ts / WEEK) * WEEK\r\n    for i in range(255):\r\n        t_i += WEEK\r\n        d_slope: int128 = 0\r\n        if t_i > t:\r\n            t_i = t\r\n        else:\r\n            d_slope = self.slope_changes[t_i]\r\n        last_point.bias -= last_point.slope * convert(t_i - last_point.ts, int128)\r\n        if t_i == t:\r\n            break\r\n        last_point.slope += d_slope\r\n        last_point.ts = t_i\r\n\r\n    if last_point.bias < 0:\r\n        last_point.bias = 0\r\n    return convert(last_point.bias, uint256)\r\n\r\n\r\n@external\r\n@view\r\ndef totalSupply(t: uint256 = block.timestamp) -> uint256:\r\n    \"\"\"\r\n    @notice Calculate total voting power\r\n    @dev Adheres to the ERC20 `totalSupply` interface for Aragon compatibility\r\n    @return Total voting power\r\n    \"\"\"\r\n    _epoch: uint256 = self.epoch\r\n    last_point: Point = self.point_history[_epoch]\r\n    return self.supply_at(last_point, t)\r\n\r\n\r\n@external\r\n@view\r\ndef totalSupplyAt(_block: uint256) -> uint256:\r\n    \"\"\"\r\n    @notice Calculate total voting power at some point in the past\r\n    @param _block Block to calculate the total voting power at\r\n    @return Total voting power at `_block`\r\n    \"\"\"\r\n    assert _block <= block.number\r\n    _epoch: uint256 = self.epoch\r\n    target_epoch: uint256 = self.find_block_epoch(_block, _epoch)\r\n\r\n    point: Point = self.point_history[target_epoch]\r\n    dt: uint256 = 0\r\n    if target_epoch < _epoch:\r\n        point_next: Point = self.point_history[target_epoch + 1]\r\n        if point.blk != point_next.blk:\r\n            dt = (_block - point.blk) * (point_next.ts - point.ts) / (point_next.blk - point.blk)\r\n    else:\r\n        if point.blk != block.number:\r\n            dt = (_block - point.blk) * (block.timestamp - point.ts) / (block.number - point.blk)\r\n    # Now dt contains info on how far are we beyond point\r\n\r\n    return self.supply_at(point, point.ts + dt)\r\n\r\n\r\n# Dummy methods for compatibility with Aragon\r\n\r\n@external\r\ndef changeController(_newController: address):\r\n    \"\"\"\r\n    @dev Dummy method required for Aragon compatibility\r\n    \"\"\"\r\n    assert msg.sender == self.controller\r\n    self.controller = _newController",
  "sourcePath": "C:/Users/vishn/OneDrive/Desktop/TempRoyakle/rlp/contracts/curve/VotingEscrow.vy",
  "compiler": {
    "name": "vyper",
    "version": "0.2.8+commit.069936f"
  },
  "networks": {},
  "schemaVersion": "3.3.2",
  "updatedAt": "2020-12-28T06:02:46.970Z"
}